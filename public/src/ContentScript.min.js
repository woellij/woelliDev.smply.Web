chrome.runtime.onMessage.addListener(function(n,t,i){var g=function(n){for(var t=[],i=0;n;)i<=3&&(c(n,"previousElementSibling",t),c(n,"nextElementSibling",t)),p(n,t),n=n.parentNode,i++;return t},p=function(n,t){if(n&&n.tagName&&n.tagName.toLowerCase()==="a"){var i=n.getAttribute("href");typeof i!=typeof undefined&&t.indexOf(i)===-1&&t.push(i)}},c=function(n,t,i){n&&(p(n,i),c(n[t],t,i))},w=function(n){var u=document.getElementsByTagName("meta"),t,f,i,r,s,e,o;if(u)for(t=0;t<n.length;t++)for(f=n[t],i=0;i<u.length;i++)if((r=u[i],s=r.name.toLowerCase(),s.indexOf(f)>-1)||(e=r.attributes.property,e&&(o=e.value,o&&o.toLowerCase().indexOf(f)>-1)))return r.content},b,k,f,e,l,o,r,a,v,s,u,h,y,d;if(n.method==="getImages"){for(b=n.minWidth,k=n.minHeight,console.log("InjectedScript getImages"),f=[],e=Array.prototype.slice.call(document.getElementsByTagName("img"),0),e.sort(function(n,t){return res=t.width*t.height-n.width*n.height}),l=[],o=0;o<e.length;o++)if(r=e[o],r.width>b&&r.height>k){for(a=g(r),v=[],s=0;s<a.length;s++)v.push({url:a[s]});l.push(r.src);f.push({src:r.src,ratio:r.width/r.height,relatedSites:v})}u=w(["og:desc","description"]);h=w(["og:image","thumbnail"]);h&&f.length==0&&l.indexOf(h)==-1&&f.unshift({src:h});u?(y=document.createElement("div"),y.innerHTML=u,u=y.firstChild.nodeValue):u="";d={images:f,description:u};i({data:d,method:"getImages"})}});
/*
//# sourceMappingURL=ContentScript.min.js.map
*/