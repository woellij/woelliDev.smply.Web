Ting.Pins=function(){var n={},t,u=function(){return t=Parse.Object.extend("pin"),n},i=function(n){for(var u,t,i=[],r=0;r<n.length;r++)u=n[r],t=u.attributes,t.pinclicked=function(n){console.log("Pin clicked",n)},t.id=u.id,t.url=t.url?t.url:"http://ting.parseapp.com",t.description=t.description?t.description:"",t.title=t.title?t.title:"",i.push(t);return console.log("PINS",i),i},r=function(n,r){var u=new Parse.Query(t);u.descending("createdAt");u.skip(n.from);u.limit(n.count);u.find({success:function(n){r(i(n))},error:function(n){alert("GetAllPinsError",n)}})},f=function(n,r){var f,o,e,u;if(typeof n.category!=typeof undefined)f=n.category.id;else if(typeof n.categoryID!=typeof undefined)f=n.categoryID;else throw new EvalError("category undefined");o=Parse.Object.extend("category");e=new o;e.set("id",f);u=new Parse.Query(t);u.descending("createdAt");u.skip(n.from);u.limit(n.count);u.equalTo("category",e);u.find({success:function(n){r(i(n))},error:function(t){console.error("NO PINS FOR CATEGORY",n.category,t)}})},e=function(n,r){var e,f,u;if(typeof n.board==typeof undefined)if(typeof n.id==typeof undefined)throw new EvalError("board undefined");else e=Parse.Object.extend("board"),f=new e,f.set("id",n.id),n.board=f;u=new Parse.Query(t);u.skip(n.from);u.limit(n.count);u.equalTo("board",n.board);u.descending("createdAt");u.find({success:function(n){console.log("got pins for",n);r(i(n))},error:function(){console.error("NO PINS FOR BOARD",n.board,error)}})},o=function(n,i,r){var s=Parse.Object.extend("board"),f=new s,o,u,e;f.set("id",i.id);o=Parse.Object.extend("category");u=new o;u.set("id",i.category.objectId);console.log("Creating Pin for board",f,u);e=new t({aspectratio:n.ratio,image:n.src,title:n.title,description:n.description,board:f,category:u,url:n.url});console.log("Creating Pin",e);e.save({success:function(n){console.log("CREATED PIN",n);r(n)},error:function(n,t,i){console.log("Error creating PIN",n,t,i);r(t)}})},s=function(n,t){r(n,t)};return n.getPopular=s,n.createPinsArray=i,n.getAll=r,n.getPinsForBoard=e,n.getPinsForCategory=f,n.create=o,n.init=u,n}();
/*
//# sourceMappingURL=Pins.min.js.map
*/