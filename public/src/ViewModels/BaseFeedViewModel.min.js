BaseFeedViewModel=function(n){var t=this;BaseViewModel.call(t);t.title(n);t.items=ko.observableArray();var f=!0,u=!1,r,e="#grid .item",i;t.onscroll=function(n,i){console.log(i);var r=i.target,u=r.scrollHeight-r.scrollTop,f=r.clientHeight-u>-200;console.log("scroll to top",u,r.clientHeight,f);f&&t.pullData()};t.pullData=function(n){var r=window.innerWidth/250*3,i={from:t.items().length,count:r|0};console.log("PULLING params",i,u,f);!u&&f&&(console.log("Fetching Items with params",i),u=!0,t.loadItems(i,function(r){f=r.length>=i.count;t.addRange(r);u=!1;n&&n()}))};t.pinRendered=function(n,t){console.log("pinRendered item ev",n,t)};t.columnWidth=ko.observable(250);t.addRange=function(n){for(var i,r=0;r<n.length;r++)i=n[r],i.height=ko.computed(function(){return t.columnWidth()/i.aspectratio},i),t.items.push(i),s()};var o=!1,s=function(){o||(t.initGrid(),o=!0);i&&(i=$(e),i.wookmark(r));$("#grid").imagesLoaded(function(){i&&i.wookmarkInstance&&i.wookmarkInstance.clear();i=$(e);i.wookmark(r)})},h=function(){var i=$("#grid .item").first().width(),n;t.columnWidth(i);n=$("body");console.log("layoutChanged",n.height());$("body").height("100%")};t.initGrid=function(){var t=$("#grid"),n=$("#grid item");console.log("items",n);n.imagesLoaded(function(){$.each($("#grid item"),function(n,t){console.log("foreach items",t)});console.log("Images Loaded");i=$(e);r||(r={itemWidth:270,autoResize:!0,container:$("#grid"),onLayoutChanged:h,offset:15,outerOffset:1,flexibleWidth:500,resizeDelay:150});i.wookmark(r);setTimeout(s,200)})}};
/*
//# sourceMappingURL=BaseFeedViewModel.min.js.map
*/